

## ğŸ“· Camera-App é¡¹ç›®æ¶æ„åˆ†æ

### 1. é¡¹ç›®ç»“æ„æ¦‚è§ˆ

```
camera-app/
â”œâ”€â”€ camera-common/           # å¹³å°æ— å…³çš„å…¬å…±ä»£ç 
â”‚   â”œâ”€â”€ camera-app.cpp/h     # CameraApp ç±» - é›†ç¾¤ç®¡ç†å™¨
â”‚   â””â”€â”€ camera-device-interface.h  # è®¾å¤‡æŠ½è±¡æ¥å£
â””â”€â”€ linux/                   # Linux å¹³å°å®ç°
    â”œâ”€â”€ main.cpp             # ç¨‹åºå…¥å£
    â”œâ”€â”€ camera-device.cpp    # å…·ä½“ç¡¬ä»¶å®ç°
    â””â”€â”€ clusters/            # å„é›†ç¾¤çš„ç®¡ç†å™¨å®ç°
        â”œâ”€â”€ chime/
        â”œâ”€â”€ webrtc-provider/
        â”œâ”€â”€ camera-avstream-mgmt/
        â”œâ”€â”€ push-av-stream-transport/
        â””â”€â”€ zone-mgmt/
```

---

### 2. ç¨‹åºå…¥å£ä¸ Matter åˆå§‹åŒ–æµç¨‹

ä¸»å…¥å£æ–‡ä»¶ `main.cpp` éå¸¸ç®€æ´ï¼š

```76:83:connectedhomeip/examples/camera-app/linux/main.cpp
int main(int argc, char * argv[])
{
    VerifyOrDie(ChipLinuxAppInit(argc, argv) == 0);

    ChipLinuxAppMainLoop();

    return 0;
}
```

**åˆå§‹åŒ–æµç¨‹**ï¼š

```
main()
  â”‚
  â”œâ”€â”€ ChipLinuxAppInit()         â† åˆå§‹åŒ– Matter åè®®æ ˆ
  â”‚     â”œâ”€â”€ Platform::MemoryInit()
  â”‚     â”œâ”€â”€ PlatformMgr().InitChipStack()
  â”‚     â”œâ”€â”€ SetCommissionableDataProvider()
  â”‚     â””â”€â”€ é…ç½®ç½‘ç»œ/KVSå­˜å‚¨ç­‰
  â”‚
  â”œâ”€â”€ ApplicationInit()          â† å›è°ƒï¼šåˆå§‹åŒ–ç›¸æœºè®¾å¤‡
  â”‚     â”œâ”€â”€ gCameraDevice.Init()
  â”‚     â””â”€â”€ CameraAppInit(&gCameraDevice)
  â”‚
  â””â”€â”€ ChipLinuxAppMainLoop()     â† è¿è¡Œ Matter äº‹ä»¶å¾ªç¯
        â””â”€â”€ Server::GetInstance().Init()
        â””â”€â”€ PlatformMgr().RunEventLoop()
```

---

### 3. æ ¸å¿ƒç±»å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          main.cpp                                    â”‚
â”‚                            â”‚                                         â”‚
â”‚                   gCameraDevice (å…¨å±€)                               â”‚
â”‚                            â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CameraDevice (Linuxå®ç°)                         â”‚
â”‚  å®ç° CameraDeviceInterface + CameraHALInterface                    â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ mChimeManager    â”‚  â”‚mWebRTCProvider   â”‚  â”‚mCameraAVStream   â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚  Manager         â”‚  â”‚  Manager         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚mPushAVTransport  â”‚  â”‚mZoneManager      â”‚  â”‚mMediaController  â”‚  â”‚
â”‚  â”‚  Manager         â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                      â”‚
â”‚  GStreamer Pipelines: Video/Audio/Snapshot                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CameraApp (å¹³å°æ— å…³)                              â”‚
â”‚  ç®¡ç†æ‰€æœ‰ Matter é›†ç¾¤æœåŠ¡å™¨                                          â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ChimeServer      â”‚  â”‚WebRTCTransport   â”‚  â”‚CameraAVStream    â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚ ProviderServer   â”‚  â”‚ MgmtServer       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚AVSettingsUser    â”‚  â”‚ZoneMgmtServer    â”‚                        â”‚
â”‚  â”‚ LevelMgmtServer  â”‚  â”‚                  â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4. Matter é›†ç¾¤åˆå§‹åŒ–

`CameraApp` ç±»è´Ÿè´£åˆå§‹åŒ–æ‰€æœ‰ Matter é›†ç¾¤ï¼š

```39:53:connectedhomeip/examples/camera-app/camera-common/src/camera-app.cpp
CameraApp::CameraApp(chip::EndpointId aClustersEndpoint, CameraDeviceInterface * aCameraDevice)
{
    mEndpoint     = aClustersEndpoint;
    mCameraDevice = aCameraDevice;

    // Instantiate Chime Server
    mChimeServerPtr = std::make_unique<ChimeServer>(mEndpoint, mCameraDevice->GetChimeDelegate());

    Clusters::PushAvStreamTransport::SetDelegate(mEndpoint, &(mCameraDevice->GetPushAVTransportDelegate()));

    Clusters::PushAvStreamTransport::SetTLSClientManagementDelegate(mEndpoint,
                                                                    &Clusters::TlsClientManagementCommandDelegate::GetInstance());

    // ... æ›´å¤šé›†ç¾¤åˆå§‹åŒ–
}
```

**æ”¯æŒçš„ Matter é›†ç¾¤**ï¼š

| é›†ç¾¤å | åŠŸèƒ½ |
|--------|------|
| **Chime** | é—¨é“ƒå£°éŸ³æç¤º |
| **WebRTCTransportProvider** | WebRTC å®æ—¶éŸ³è§†é¢‘ä¼ è¾“ |
| **CameraAVStreamManagement** | éŸ³è§†é¢‘æµæ§åˆ¶ï¼ˆåˆ†è¾¨ç‡ã€å¸§ç‡ã€ç¼–è§£ç å™¨ï¼‰ |
| **CameraAvSettingsUserLevelManagement** | PTZ æ§åˆ¶ï¼ˆå¹³ç§»/å€¾æ–œ/ç¼©æ”¾ï¼‰ |
| **ZoneManagement** | åŒºåŸŸæ£€æµ‹ç®¡ç†ï¼ˆè¿åŠ¨æ£€æµ‹åŒºåŸŸï¼‰ |
| **PushAvStreamTransport** | æ¨é€æµä¼ è¾“ |

---

### 5. è§†é¢‘æµå¤„ç†ï¼ˆGStreamerï¼‰

ç›¸æœºä½¿ç”¨ **GStreamer** è¿›è¡Œåª’ä½“å¤„ç†ã€‚æ ¸å¿ƒç®¡çº¿åˆ›å»ºä»£ç ï¼š

```477:555:connectedhomeip/examples/camera-app/linux/src/camera-device.cpp
// åˆ›å»ºè§†é¢‘ç®¡çº¿ï¼šv4l2src â†’ capsfilter â†’ videoconvert â†’ x264enc â†’ appsink
GstElement * CameraDevice::CreateVideoPipeline(const std::string & device, int width, int height, int framerate,
                                               CameraError & error)
{
    GstElement * pipeline     = gst_pipeline_new("video-pipeline");
    GstElement * source       = gst_element_factory_make("v4l2src", "source");
    // ... æˆ–ä½¿ç”¨ videotestsrc æµ‹è¯•æº
    GstElement * videoconvert = gst_element_factory_make("videoconvert", "videoconvert");
    GstElement * x264enc      = gst_element_factory_make("x264enc", "encoder");
    GstElement * appsink      = gst_element_factory_make("appsink", "appsink");
    
    // ç¼–ç å‚æ•°è®¾ç½®
    g_object_set(x264enc, "tune", 0, "speed-preset", 1, "key-int-max", framerate * 1, "insert-vui", TRUE, nullptr);
    
    // é“¾æ¥ç®¡çº¿
    gst_element_link_many(source, capsfilter1, videoconvert, capsfilter2, x264enc, appsink, nullptr);
}
```

**è§†é¢‘æµæ•°æ®æµå‘**ï¼š

```
æ‘„åƒå¤´(/dev/video0)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GStreamer Video Pipeline                      â”‚
â”‚                                                                  â”‚
â”‚  v4l2src â†’ capsfilter â†’ videoconvert â†’ x264enc â†’ appsink        â”‚
â”‚            (åˆ†è¾¨ç‡)      (æ ¼å¼è½¬æ¢)    (H.264ç¼–ç )  (è¾“å‡ºå›è°ƒ)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ OnNewVideoSampleFromAppSink() å›è°ƒ
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MediaController                               â”‚
â”‚              DistributeVideo(data, size, streamID)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WebRTC   â”‚    â”‚ Push AV  â”‚       â”‚ å½•åƒ     â”‚
â”‚ Transportâ”‚    â”‚ Transportâ”‚       â”‚ Storage  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 6. è®¾å¤‡æŠ½è±¡å±‚ (HAL) æ¥å£

`CameraDeviceInterface` å®šä¹‰äº†æ‰€æœ‰ç›¸æœºå¿…é¡»å®ç°çš„åŠŸèƒ½ï¼š

```116:424:connectedhomeip/examples/camera-app/camera-common/include/camera-device-interface.h
class CameraDeviceInterface
{
public:
    // è·å–å„é›†ç¾¤çš„å§”æ‰˜å¯¹è±¡
    virtual ChimeDelegate & GetChimeDelegate() = 0;
    virtual WebRTCTransportProvider::Delegate & GetWebRTCProviderDelegate() = 0;
    virtual CameraAVStreamManagementDelegate & GetCameraAVStreamMgmtDelegate() = 0;
    
    // ç¡¬ä»¶æŠ½è±¡å±‚æ¥å£
    class CameraHALInterface
    {
    public:
        // åˆå§‹åŒ–ç›¸æœºç¡¬ä»¶
        virtual CameraError InitializeCameraDevice() = 0;
        
        // æµæ“ä½œ
        virtual CameraError StartVideoStream(const VideoStreamStruct & allocatedStream) = 0;
        virtual CameraError StopVideoStream(uint16_t streamID) = 0;
        virtual CameraError StartAudioStream(uint16_t streamID) = 0;
        virtual CameraError StopAudioStream(uint16_t streamID) = 0;
        
        // æ‹ç…§
        virtual CameraError CaptureSnapshot(...) = 0;
        
        // PTZ æ§åˆ¶
        virtual CameraError SetPan(int16_t aPan) = 0;
        virtual CameraError SetTilt(int16_t aTilt) = 0;
        virtual CameraError SetZoom(uint8_t aZoom) = 0;
        
        // éŸ³é¢‘æ§åˆ¶
        virtual CameraError SetSpeakerMuted(bool muteSpeaker) = 0;
        virtual CameraError SetMicrophoneMuted(bool muteMicrophone) = 0;
        
        // éšç§æ¨¡å¼
        virtual CameraError SetSoftRecordingPrivacyModeEnabled(bool) = 0;
        virtual CameraError SetSoftLivestreamPrivacyModeEnabled(bool) = 0;
    };
};
```

---

### 7. æ„å»ºå’Œè¿è¡Œ

**æ„å»ºå‘½ä»¤**ï¼š
```bash
# æ¿€æ´»ç¯å¢ƒ
source scripts/activate.sh

# ç¼–è¯‘
./scripts/build/build_examples.py --target linux-x64-camera build

# è¾“å‡ºæ–‡ä»¶
# out/linux-x64-camera/chip-camera-app
```

**è¿è¡Œç¤ºä¾‹**ï¼š
```bash
./chip-camera-app --video video0 --test-video-src

# --video: æŒ‡å®šè§†é¢‘è®¾å¤‡
# --test-video-src: ä½¿ç”¨æµ‹è¯•è§†é¢‘æºï¼ˆä¸éœ€è¦çœŸå®æ‘„åƒå¤´ï¼‰
```

---

### 8. æ€»ç»“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Matter Controller                              â”‚
â”‚                     (æ‰‹æœºApp / æ™ºèƒ½å®¶å±…Hub / chip-tool)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚ Matter Protocol
                                      â”‚ (IPç½‘ç»œ)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          chip-camera-app (è®¾å¤‡ç«¯)                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                       Matter Server (SDK)                              â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”‚
â”‚ â”‚  â”‚Chime   â”‚ â”‚WebRTC  â”‚ â”‚AVStream â”‚ â”‚PTZ     â”‚ â”‚Zone     â”‚            â”‚ â”‚
â”‚ â”‚  â”‚Cluster â”‚ â”‚Cluster â”‚ â”‚Cluster  â”‚ â”‚Cluster â”‚ â”‚Cluster  â”‚            â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                           CameraApp                                    â”‚ â”‚
â”‚ â”‚               (é›†ç¾¤ä¸è®¾å¤‡ä¹‹é—´çš„æ¡¥æ¥å±‚)                                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                         CameraDevice                                   â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚ â”‚  â”‚                    GStreamer Pipelines                          â”‚  â”‚ â”‚
â”‚ â”‚  â”‚   Video: v4l2src â†’ x264enc â†’ appsink                           â”‚  â”‚ â”‚
â”‚ â”‚  â”‚   Audio: pulsesrc â†’ opusenc â†’ appsink                          â”‚  â”‚ â”‚
â”‚ â”‚  â”‚   Snapshot: v4l2src â†’ jpegenc â†’ filesink                       â”‚  â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚                       â”‚
                     /dev/video0             /dev/audio0
                    (V4L2æ‘„åƒå¤´)             (PulseAudio)
```

